[general]
ui = ttyui
fsync = false
accounts = WeHandleIt
pythonfile = ~/.offlineimap/support.py
socktimeout = 90

[Account WeHandleIt]
localrepository = WeHandleIt-Local
remoterepository = WeHandleIt-Remote
autorefresh = 5
quick = 10
postsynchook = notmuch new

[Repository WeHandleIt-Local]
type = GmailMaildir
localfolders = ~/.maildir/wehandleit
nametrans = lambda folder: {'inbox':    'INBOX',
                            'drafts':   '[Gmail]/Drafts',
                            'sent':     '[Gmail]/Sent Mail',
                            'flagged':  '[Gmail]/Starred',
                            'spam':     '[Gmail]/Spam',
                            'trash':    '[Gmail]/Trash',
                            'archive':  '[Gmail]/All Mail',
                            'later':    'Later',
                           }.get(folder, folder)

[Repository WeHandleIt-Remote]
type = Gmail
sslcacertfile  = /usr/local/etc/openssl/cert.pem
# XXX: https://github.com/OfflineIMAP/offlineimap/issues/573
ssl_version = tls1_2
auth_mechanisms = LOGIN
remoteusereval = whiUser()
remotepasseval = whiPass()
realdelete = yes
maxconnections = 3
keepconnectionopen = yes
keepalive = 60
idlefolders = ['INBOX']
folderfilter = lambda folder: not re.search('(Important|Mailbox)', folder)
nametrans = lambda folder: {'INBOX':             'inbox',
                            '[Gmail]/Drafts':    'drafts',
                            '[Gmail]/Sent Mail': 'sent',
                            '[Gmail]/Starred':   'flagged',
                            '[Gmail]/Spam':      'spam',
                            '[Gmail]/Trash':     'trash',
                            '[Gmail]/All Mail':  'archive',
                            'Later':             'later',
                           }.get(folder, folder)
